<html>


<title>Splide JS - Hello</title>

<link rel="stylesheet" href="node_modules/@splidejs/splide/dist/css/splide.min.css">
<script src="node_modules/@splidejs/splide/dist/js/splide.min.js"></script>
<script src="node_modules/jquery/dist/jquery.min.js"></script>

<body>
    <div class="splide">
        <div class="splide__track">
            <ul class="splide__list" id="player-container">
                <li class="splide__slide"></li>
                <li class="splide__slide"></li>
            </ul>
        </div>
    </div>
</body>

<script type="text/javascript">

    var players = []

    window.onYouTubePlayerAPIReady = function () {
        console.log('x2');
        $('.splide__slide').each(function (index, element) {
            let playerVideoId = "player-video-" + index;

            var player = new YT.Player(playerVideoId, {
                events: {
                    'onStateChange': onPlayerStateChange
                }
            });

            players.push(player)
        });
    };

    document.addEventListener('DOMContentLoaded', function () {
        console.log('x1');
        $('.splide__slide').each(function (index, element) {
            let playerVideoId = "player-video-" + index;
            $(this).attr('id', playerVideoId);

            var $iframe = `<iframe id="${playerVideoId}" type="text/html" width="640" height="390"
        src="http://www.youtube.com/embed/M7lc1UVf-VE?enablejsapi=1"
        frameborder="0"></iframe>`;      
            $(this).html($iframe);
        });

        new Splide('.splide').mount();

    });

    function onPlayerStateChange(event) {
        console.log('x3');
        console.log(event);
    }


</script>

</html>